<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="coupon">
    <!--  사용자 쿠폰 조회  -->
    <select id="userCoupon" parameterType="map" resultType="mybatis.vo.CouponVO">
        SELECT c.couponIdx, c.couponName, c.couponInfo, c.couponType, c.couponValue, c.couponRegDate, c.couponExpDate, c.couponStatus,
                cum.couponUserIdx, cum.userIdx, cum.couponUserStatus, cum.couponUserDate
        FROM coupon c
        JOIN couponUserMapping cum ON c.couponIdx = cum.couponIdx
        WHERE cum.userIdx = #{userIdx}
        ORDER BY c.couponExpDate DESC
        LIMIT #{begin}, #{end};
    </select>
</mapper>
CREATE DATABASE  IF NOT EXISTS `cinema_db` /*!40100 DEFAULT CHARACTER SET utf8 */;
USE `cinema_db`;
-- MySQL dump 10.13  Distrib 8.0.40, for Win64 (x86_64)
--
-- Host: 180.71.29.2    Database: cinema_db
-- ------------------------------------------------------
-- Server version	5.7.44

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `payment`
--

DROP TABLE IF EXISTS `payment`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `payment` (
  `paymentIdx` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '결제 고유 ID',
  `userIdx` bigint(20) NOT NULL COMMENT '사용자 고유 ID',
  `paymentType` tinyint(1) NOT NULL COMMENT '결제 종류 (1: 영화 예매, 2: 상품 구매)',
  `reservationIdx` bigint(20) DEFAULT NULL COMMENT '예매 고유 ID (영화 결제인 경우에만 사용)',
  `productIdx` bigint(20) DEFAULT NULL COMMENT '상품 고유 ID (상품 결제인 경우에만 사용)',
  `paymentQuantity` int(5) NOT NULL DEFAULT '0' COMMENT '결제 대상 수량(영화 티켓, 상품)',
  `paymentMethod` varchar(10) NOT NULL COMMENT '결제 방식 (CARD, NAVER, KAKAO, TOSS 등)',
  `paymentTotal` int(7) NOT NULL COMMENT '결제 금액 (할인 전 금액)',
  `paymentDiscount` int(7) DEFAULT NULL COMMENT '포인트, 쿠폰 등 할인 금액',
  `paymentFinal` int(7) NOT NULL COMMENT '실제 결제 금액',
  `paymentTransactionId` varchar(50) DEFAULT NULL COMMENT '결제 API에서 제공하는 고유 거래 ID',
  `paymentDate` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '결제일',
  `paymentCancelDate` datetime DEFAULT NULL COMMENT '결제 취소 일시',
  `paymentStatus` tinyint(1) NOT NULL DEFAULT '0' COMMENT '결제 상태 (0: 완료, 1: 대기, 2: 취소)',
  PRIMARY KEY (`paymentIdx`),
  KEY `userIdx` (`userIdx`),
  KEY `reservationIdx` (`reservationIdx`),
  KEY `productIdx` (`productIdx`),
  CONSTRAINT `payment_ibfk_1` FOREIGN KEY (`userIdx`) REFERENCES `user` (`userIdx`) ON DELETE CASCADE,
  CONSTRAINT `payment_ibfk_2` FOREIGN KEY (`reservationIdx`) REFERENCES `reservation` (`reservationIdx`) ON DELETE CASCADE,
  CONSTRAINT `payment_ibfk_3` FOREIGN KEY (`productIdx`) REFERENCES `product` (`productIdx`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=194 DEFAULT CHARSET=utf8 COMMENT='결제 정보를 저장하는 테이블';
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `payment`
--

LOCK TABLES `payment` WRITE;
/*!40000 ALTER TABLE `payment` DISABLE KEYS */;
INSERT INTO `payment` VALUES (21,1,2,NULL,NULL,0,'간편결제',12000,NULL,12000,'order-58632c77-f9d7-40f0-b9ee-80013efbf539','2025-01-29 19:33:12',NULL,0),(22,1,2,NULL,NULL,0,'간편결제',15000,NULL,15000,'order-13c4361e-cf23-4b33-9634-9a27d8d47506','2025-01-29 21:58:25',NULL,0),(23,1,2,NULL,NULL,0,'간편결제',12000,NULL,12000,'order-7431229e-bf70-44fc-98fc-e20291058e6e','2025-01-29 22:01:13',NULL,0),(24,1,1,NULL,NULL,0,'카드',15000,NULL,15000,'order-2f02a535-1692-4b39-8de2-e0bbed638652','2025-01-29 22:04:20',NULL,0),(25,1,1,NULL,NULL,0,'간편결제',12000,NULL,12000,'order-568fbf94-66b7-4467-a9e5-f707724e66a6','2025-01-29 22:07:00',NULL,0),(26,1,2,NULL,NULL,0,'간편결제',3000,NULL,3000,'order-f48c14c7-24fd-464d-833f-ef7a9c2e65a0','2025-01-29 22:11:25',NULL,0),(27,1,2,NULL,NULL,0,'간편결제',15000,NULL,15000,'order-98b95c5e-74d1-4b61-8446-0020a8b4723c','2025-01-29 22:18:29',NULL,0),(28,1,2,NULL,NULL,0,'간편결제',15000,NULL,15000,'order-1c8307f1-d511-4fa9-a586-c604c1f1a866','2025-01-29 22:20:42',NULL,0),(29,1,2,NULL,6,0,'간편결제',20000,NULL,20000,'order-c939efbb-6dc6-42e6-96bf-01d16bd8b4b4','2025-01-29 22:22:25',NULL,2),(30,1,2,NULL,4,0,'카드',12000,NULL,12000,'order-21353df2-b4a5-4302-92b0-ed6794b2b5de','2025-01-31 09:17:04',NULL,0),(31,1,2,NULL,4,0,'간편결제',12000,NULL,12000,'order-6557b13a-e8a0-4e2f-ba26-1c3631473eae','2025-01-31 09:20:02',NULL,0),(32,1,2,NULL,3,0,'간편결제',15000,NULL,15000,'order-13abde49-44da-4778-b5b7-d654181e78a5','2025-01-31 09:21:24',NULL,0),(33,1,2,NULL,4,0,'간편결제',12000,NULL,12000,'order-83550c39-e828-488e-a765-685b82c84943','2025-01-31 09:25:12',NULL,0),(34,1,2,NULL,4,0,'간편결제',12000,NULL,12000,'order-0aa8d57b-89a4-4be9-b3a7-da3becb2ea95','2025-01-31 09:30:14',NULL,0),(35,1,2,NULL,3,0,'간편결제',15000,NULL,15000,'order-6fba6ca2-4cf0-4d73-a807-096a2f5be4e8','2025-01-31 09:40:35',NULL,0),(36,1,2,NULL,5,0,'간편결제',25000,NULL,25000,'order-d29e7d6e-fef5-4898-98ab-e2ff86eb1aba','2025-01-31 14:53:42',NULL,0),(37,1,2,NULL,5,0,'간편결제',25000,NULL,25000,'order-96380797-d134-4c30-9a8f-8c1fe6cdaee2','2025-01-31 16:57:12',NULL,0),(38,1,2,NULL,5,0,'간편결제',25000,NULL,25000,'order-1078b8f4-47f3-40c7-8833-2806d1c6d68e','2025-01-31 17:03:34',NULL,0),(39,1,2,NULL,5,0,'간편결제',25000,NULL,25000,'order-88926123-b5b6-429a-9ad5-ff77000ff224','2025-01-31 17:07:17',NULL,0),(40,1,2,NULL,4,0,'간편결제',12000,NULL,12000,'order-f27ba7f3-3042-4d10-b498-9b2577fd9356','2025-01-31 17:08:33',NULL,0),(41,1,2,NULL,4,0,'간편결제',12000,NULL,12000,'order-5f76992f-d3ee-434d-84ec-bffa9799e41d','2025-01-31 17:11:00',NULL,0),(42,1,2,NULL,3,0,'간편결제',15000,NULL,15000,'order-dec1b96b-8f4e-4b4f-8d47-f8869c779cf8','2025-01-31 17:13:18',NULL,0),(43,1,2,NULL,4,0,'간편결제',12000,NULL,12000,'order-32c1a731-30a3-47cf-9cb3-687107587707','2025-01-31 17:17:27',NULL,0),(44,1,2,NULL,4,0,'간편결제',12000,NULL,12000,'order-918431b1-e856-4a5e-9ade-9075d85f5050','2025-01-31 17:20:39',NULL,0),(45,1,2,NULL,4,0,'간편결제',12000,NULL,12000,'order-bf47b9e4-7095-40ad-927e-2f08d8c50ba7','2025-01-31 17:21:52',NULL,0),(46,1,2,NULL,4,0,'간편결제',12000,NULL,12000,'order-0f6cde21-b8a4-4cf4-9ccd-57eb4fa03244','2025-01-31 17:23:53',NULL,0),(47,1,2,NULL,3,0,'간편결제',15000,NULL,15000,'order-59f99d62-f98b-4065-a9ee-9baa47ba2dd7','2025-01-31 17:24:54',NULL,0),(48,1,2,NULL,4,0,'간편결제',12000,NULL,12000,'order-2bbb4e90-524a-41f4-b3ed-01a1b0751a87','2025-01-31 17:32:03',NULL,0),(49,1,2,NULL,3,0,'간편결제',15000,NULL,15000,'order-6ccbe269-14c4-4c9d-8871-beea5d377c40','2025-01-31 17:38:14',NULL,0),(50,1,2,NULL,2,0,'간편결제',30000,NULL,30000,'order-d56d09e9-8c34-4b3e-8c86-998edc7eeebf','2025-01-31 17:55:23',NULL,0),(51,1,2,NULL,3,0,'간편결제',15000,NULL,15000,'order-9d0ccf5e-ce74-4327-8416-0f254e185232','2025-01-31 22:35:45',NULL,0),(52,1,2,NULL,3,0,'간편결제',15000,NULL,15000,'order-9b8704b6-c3a8-47f4-b3d7-e0782450672d','2025-01-31 22:37:07',NULL,0),(53,1,2,NULL,4,0,'간편결제',12000,NULL,12000,'order-0f20409d-8fd7-4a32-946f-b2d1fcf9f074','2025-01-31 22:47:14',NULL,0),(56,1,2,NULL,3,1,'간편결제',15000,NULL,15000,'order-0b7b9d1c-3dea-45a4-b4ae-b3e902041349','2025-02-03 00:17:59',NULL,0),(76,159,2,NULL,2,1,'간편결제',30000,NULL,30000,'order-61f73716-32de-4981-b4e6-bb69c9fbfc07','2025-02-05 12:28:13',NULL,0),(82,183,2,NULL,13,1,'간편결제',3000,NULL,3000,'order-304786d0-86ac-46b8-8175-44278a2164ca','2025-02-06 05:39:11',NULL,0),(84,179,2,NULL,1,1,'간편결제',2000,NULL,2000,'order-b643927e-2b98-4a94-8be1-8bdb34108457','2025-02-06 12:40:56',NULL,0),(90,183,2,NULL,17,1,'간편결제',5000,NULL,5000,'order-cb2e9fcf-12c2-4ca3-b22c-6379b68a5951','2025-02-06 15:36:57',NULL,0),(91,183,2,NULL,13,1,'간편결제',1890,NULL,1890,'order-cb58156b-c2ce-4534-ad08-db59bf337c61','2025-02-06 15:41:42',NULL,0),(92,183,2,NULL,17,1,'간편결제',5000,NULL,5000,'order-7e7d1714-37e1-41d4-b44a-7e39d8e7e2e1','2025-02-06 15:44:22',NULL,0),(93,183,2,NULL,16,1,'간편결제',9000,NULL,9000,'order-af500fed-6ea0-43ff-82b0-f60b4e7fc956','2025-02-06 15:45:35',NULL,0),(94,183,2,NULL,13,1,'간편결제',2870,NULL,2870,'order-b6605212-7172-463f-a281-8084e43273ff','2025-02-06 15:48:02',NULL,0),(95,183,2,NULL,17,1,'간편결제',5780,NULL,5780,'order-3baa6374-54a6-4fcf-98a5-6eba6b1a0845','2025-02-06 16:28:05',NULL,0),(96,183,2,NULL,17,1,'간편결제',8000,NULL,8000,'order-d0fe0d87-69e9-498f-85aa-b80fec73c7c7','2025-02-06 16:37:45',NULL,0),(98,183,2,NULL,2,1,'간편결제',27000,NULL,27000,'order-40087932-5ab3-4bb3-88d4-8a13e2bf548a','2025-02-06 17:55:47',NULL,0),(99,183,2,NULL,2,1,'간편결제',30000,NULL,30000,'order-95221c5b-9574-4565-b0ae-ec7ee3681247','2025-02-06 17:57:11',NULL,0),(100,183,2,NULL,2,1,'간편결제',30000,NULL,30000,'order-b4c6d4af-59ef-4352-bbe3-60b0bf847374','2025-02-06 18:04:57',NULL,0),(101,183,2,NULL,2,1,'간편결제',30000,NULL,30000,'order-7f12bdbd-a60e-48cb-8603-e39c76f55e88','2025-02-06 18:06:29',NULL,0),(102,183,2,NULL,2,1,'간편결제',30000,NULL,30000,'order-a41d8883-f5b2-4966-9a02-14372d38619f','2025-02-06 18:07:53',NULL,0),(103,183,2,NULL,2,1,'간편결제',30000,NULL,30000,'order-a7fdc16f-1788-4e2b-bb3a-ee56d4f171d4','2025-02-06 18:09:21',NULL,0),(104,183,2,NULL,13,1,'간편결제',3000,NULL,3000,'order-551cb700-5b61-4d46-8eeb-e977bcb1a45d','2025-02-06 18:14:40',NULL,0),(105,183,2,NULL,4,1,'간편결제',12000,NULL,12000,'order-d756f5bf-85d4-43ed-8bd1-8116d14feac4','2025-02-06 18:18:11',NULL,0),(106,183,2,NULL,3,1,'간편결제',15000,NULL,15000,'order-ee0e18b2-e102-4844-8b73-ded0a323b9c7','2025-02-06 18:26:08',NULL,0),(107,183,2,NULL,5,1,'간편결제',25000,NULL,25000,'order-c4ddf614-d35e-423f-9d46-28d0031c4f33','2025-02-06 18:29:18',NULL,0),(108,183,2,NULL,16,1,'간편결제',5000,NULL,5000,'order-950aa288-ddb2-42fd-970d-9894edf61e23','2025-02-06 18:29:55',NULL,0),(109,183,2,NULL,17,1,'간편결제',8000,NULL,8000,'order-8420d838-5042-499c-8627-ca27bb1a7c0a','2025-02-06 18:38:52',NULL,0),(110,183,2,NULL,17,1,'간편결제',8000,NULL,8000,'order-be32e555-287a-4f64-bfe4-497d0e6140f1','2025-02-06 18:41:03',NULL,0),(112,183,2,NULL,16,1,'간편결제',5000,NULL,5000,'order-257dfa08-2810-4f95-8a84-62707428f270','2025-02-06 18:47:08',NULL,0),(115,183,2,NULL,16,1,'간편결제',5000,NULL,5000,'order-e433319e-e6b8-4a36-bd8f-7adc1a6dc22d','2025-02-06 18:50:25',NULL,0),(117,183,2,NULL,16,1,'간편결제',5000,NULL,5000,'order-73a5a719-76c7-4606-958b-31233e667cd9','2025-02-06 18:52:27',NULL,0),(121,183,2,NULL,1,1,'간편결제',600,NULL,600,'order-3c4044a2-9291-464b-a2a2-65fe744a80ad','2025-02-06 19:35:56',NULL,0),(122,183,2,NULL,16,1,'간편결제',2667,NULL,2667,'order-27417da8-ff70-49ee-826d-1d79d77fcc71','2025-02-06 20:02:31',NULL,0),(123,183,2,NULL,16,1,'간편결제',2000,NULL,2000,'order-d7a96a7a-ffdf-468f-bac8-adb497283ba9','2025-02-06 20:18:05',NULL,0),(124,183,2,NULL,16,1,'간편결제',-5000,7000,2000,'order-9cda0cd2-3809-4935-b7e4-5618e4227ed4','2025-02-06 20:29:53',NULL,0),(125,183,2,NULL,16,1,'간편결제',9000,7000,2000,'order-29797317-0078-4b0d-8463-e0e1553cb59d','2025-02-06 20:31:23',NULL,0),(126,183,2,NULL,16,1,'간편결제',9000,7000,2000,'order-a5b029c2-c422-4aa5-8402-6f1620fdf5f9','2025-02-06 20:32:46',NULL,0),(127,183,2,NULL,16,1,'쿠폰/포인트',9000,9000,0,'order-c9c60e17-59a2-4d78-be36-e131b6d379fd','2025-02-06 22:49:56',NULL,0),(128,183,2,NULL,14,1,'쿠폰/포인트',4000,4000,0,'order-a9fa2ab4-f170-47b1-8881-ac29cffb5d46','2025-02-06 22:51:33',NULL,0),(130,183,2,NULL,2,1,'쿠폰/포인트',30000,30000,0,'order-652d1ea9-83cb-43c3-be88-ab20f6412a27','2025-02-06 23:45:13',NULL,0),(131,183,2,NULL,2,1,'쿠폰/포인트',30000,30000,0,'order-eafc8780-34af-4120-b0e7-58fe0a8075ba','2025-02-06 23:47:11',NULL,0),(132,183,2,NULL,1,1,'쿠폰/포인트',2000,2000,0,'order-cdf2604b-e323-4f30-91d8-a62bbd980edc','2025-02-06 23:50:59',NULL,0),(135,183,2,NULL,7,1,'쿠폰/포인트',15000,15000,0,'order-9b568299-36ff-4084-b692-562dd9b177a7','2025-02-07 10:36:28',NULL,0),(137,183,2,NULL,6,1,'간편결제',20000,0,20000,'order-6ee34b38-4c75-4e57-819b-56961e24928b','2025-02-07 12:28:27',NULL,0),(138,183,2,NULL,6,1,'간편결제',20000,0,20000,'order-7a7c0302-658d-4789-96db-9eccd4366762','2025-02-07 12:29:56',NULL,0),(139,183,2,NULL,6,1,'쿠폰/포인트',20000,20000,0,'order-b48d1cb0-96eb-4e8e-82ec-300209ebfbe9','2025-02-07 12:30:05',NULL,0),(140,183,2,NULL,6,1,'쿠폰/포인트',20000,20000,0,'order-141920b0-1e25-4f2e-8424-27875e8235ca','2025-02-07 12:33:15',NULL,0),(141,183,2,NULL,6,1,'간편결제',20000,0,20000,'order-bc9a1d09-6599-4cb1-a704-6d3b0d915459','2025-02-07 12:33:49',NULL,0),(145,183,2,NULL,6,1,'간편결제',20000,0,20000,'order-5bbccfaa-68cd-426a-8102-fd0d38ee3624','2025-02-08 18:24:53',NULL,0),(155,236,2,NULL,8,3,'간편결제',29994,0,29994,'order-aa989ec9-5714-4d38-81df-3e6dfdbc0a24','2025-02-10 02:11:27',NULL,0),(171,1,1,1,NULL,2,'간편결제',12000,0,12000,'order-3f84a8c5-4b32-4696-b3d8-791f1b5e8c91','2025-02-10 12:45:33',NULL,0),(172,2,1,2,NULL,1,'카드',15000,0,15000,'order-6ea97212-5ed6-41f4-8d12-1d634f7f4af2','2025-02-10 13:12:20',NULL,0),(173,3,1,3,NULL,1,'간편결제',2000,500,1500,'order-f3d290c2-d2cf-4e95-8324-92679a0f236d','2025-02-10 13:35:47',NULL,0),(174,4,1,4,NULL,2,'간편결제',18000,0,18000,'order-942d68d6-a8f0-44a7-b4c3-62f2464d9ab3','2025-02-10 14:00:05',NULL,0),(175,5,1,5,NULL,2,'카드',25000,2000,23000,'order-b4f7725e-4873-48d5-9ac1-76c521dff16b','2025-02-10 14:32:11',NULL,0),(181,191,1,30,NULL,3,'간편결제',49000,NULL,49000,'ORDER-1739164490114','2025-02-10 14:15:15',NULL,0),(182,191,1,31,NULL,2,'간편결제',36000,NULL,36000,'ORDER-1739164976109','2025-02-10 14:23:17',NULL,0),(183,191,2,NULL,6,1,'간편결제',20000,0,20000,'order-451011f5-8bf4-4365-88dc-80bbae31a675','2025-02-10 14:24:02',NULL,0),(184,191,2,NULL,11,1,'간편결제',6000,0,6000,'order-459220c0-feac-45e7-b5a4-67aa0b29f9c5','2025-02-10 14:27:54',NULL,0),(185,191,1,32,NULL,3,'간편결제',58000,NULL,58000,'ORDER-1739166108472','2025-02-10 14:42:02',NULL,0),(186,191,1,33,NULL,4,'간편결제',76000,8500,67500,'ORDER-1739168730040','2025-02-10 15:25:49',NULL,0),(187,191,1,34,NULL,3,'간편결제',58000,8000,50000,'ORDER-1739276471282','2025-02-11 21:21:35',NULL,0),(188,161,1,35,NULL,2,'카드',30000,4000,26000,'ORDER-1739277733274','2025-02-11 21:46:33',NULL,0),(189,191,2,NULL,1,1,'간편결제',2000,1000,1000,'order-119c13a1-45d1-4151-b174-22056244f152','2025-02-11 22:39:40',NULL,0),(190,236,1,36,NULL,2,'간편결제',34000,7998,26002,'ORDER-1739690358661','2025-02-16 16:19:53',NULL,0),(191,183,2,NULL,8,1,'쿠폰/포인트',9998,9998,0,'order-7040fdd4-bc26-41d9-9a07-66f5720e7c35','2025-02-24 21:43:16',NULL,0),(192,183,2,NULL,14,1,'쿠폰/포인트',4000,4000,0,'order-84873621-b222-4c65-8acb-28192beebca7','2025-02-24 21:44:13',NULL,0),(193,183,2,NULL,14,1,'쿠폰/포인트',4000,4000,0,'order-ff87176e-3a24-4408-99cd-1d3a5556baaf','2025-02-24 21:45:25',NULL,0);
/*!40000 ALTER TABLE `payment` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2025-03-16 19:51:07
